{% extends "base.html" %}
{% block content %}
<div class="row">
    <div class="col s12 center-align">
        <h1>Workout Log</h1>
    </div>
</div>
<div class="row">
    <a href="{{ url_for('add_workout') }}" class="waves-effect waves-light btn-large col s6 offset-s3 m4 offset-m4">
        <i class="fa-solid fa-circle-plus right"></i>Add Record</a>
</div>
<div class="row">
    <div class="col s12 l8 offset-l2">
        <ul class="collapsible">
            <!-- iterate over workout logs and add a collapsible accordion section for each -->
            {% for log in logs %}
            <li>
                <!-- collapsible header -->
                <div class="collapsible-header black white-text">
                    <div class="col s10">
                        {{ log.date.strftime("%d/%m/%Y, %I:%M %p") }} - {{ log.routine[0].routine_name }}
                    </div>
                    <div class="col s2">
                        <i class="fa-solid fa-circle-chevron-down right"></i>
                    </div>
                </div>
                <!-- collapsible body -->
                <div class="collapsible-body">
                    <div class="row center-align">
                        <div class="col s12 m4 offset-m4">
                            <div class="log-number">
                                {{ log.sets }}
                            </div>
                        </div>
                        <div class="col s12 m4 offset-m4">
                            <div>
                                sets completed, totalling:
                            </div>
                        </div>
                    </div>
                    <div class="row center-align">
                        <div class="col s12 m4">
                            <div class="log-number">{{ log.routine[0].exercise_one_reps * log.sets }}</div>
                            <div>{{ log.routine[0].exercise_one }}s</div>
                        </div>
                        <div class="col s12 m4">
                            <div class="log-number">{{ log.routine[0].exercise_two_reps * log.sets }}</div>
                            <div>{{ log.routine[0].exercise_two }}s</div>
                        </div>
                        <div class="col s12 m4">
                            <div class="log-number">{{ log.routine[0].exercise_three_reps * log.sets }}</div>
                            <div>{{ log.routine[0].exercise_three }}s</div>
                        </div>
                    </div>
                    {% if log.notes %}
                    <p><strong class="bolder">Notes:</strong><br>
                        {{ log.notes }}</p>
                    {% endif %}
                    <div class="row">
                        <a href="{{ url_for('edit_workout', log_id=log._id) }}"
                            class="waves-effect waves-light btn-large col s12 l5 margin-top-2">
                            <i class="fa-solid fa-pen right"></i>Edit</a>
                        <!-- Delete button triggers confirmation modal -->
                        <a href="#{{ log._id }}_modal"
                            class="waves-effect waves-light btn-large col s12 l5 offset-l2 margin-top-2 red modal-trigger">
                            <i class="fa-solid fa-trash right"></i>Delete</a>
                        <!-- Delete confimation modal -->
                        <div id="{{ log._id }}_modal" class="modal">
                            <div class="modal-content">
                                <h4>Do you really want to delete this record?</h4>
                                <p>Deleted records can't be recovered.</p>
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class="modal-close waves-effect waves-green btn">Cancel</a>
                                <a href="{{ url_for('delete_workout', log_id=log._id) }}" 
                                class="modal-close waves-effect waves-light btn red">Confirm</a>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            {% endfor %}
    </div>
    </ul>
</div>
{% endblock %}